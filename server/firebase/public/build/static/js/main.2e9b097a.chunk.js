(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,a){e.exports=a(339)},184:function(e,t,a){},185:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(8),o=a.n(r),l=(a(184),a(19)),c=a(20),s=a(22),m=a(21),u=a(23),p=(a(185),a(186),a(176)),h=a(175),g=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"mapViewDiv"})}},{key:"componentDidMount",value:function(){var e=this;Object(h.a)(["esri/Map","esri/views/MapView","esri/Graphic","esri/geometry/Point","esri/geometry/Circle","esri/symbols/SimpleMarkerSymbol","esri/geometry/Polyline","esri/symbols/SimpleLineSymbol","dojo/domReady!"]).then(function(t){var a=Object(p.a)(t,8),n=a[0],i=a[1],r=a[2],o=a[3],l=a[4],c=a[5],s=a[6],m=a[7];e.setState({Polyline:s,SimpleLineSymbol:m,Graphic:r,Point:o,SimpleMarkerSymbol:c});var u=new n({basemap:"streets-navigation-vector",ground:"world-elevation"}),h=new o(e.props.originPoint),g=new r({geometry:h,symbol:new c({color:[226,119,40],outline:{color:[255,255,255],width:1}})}),d=new l({center:h,radius:2e3,radiusUnit:"meters"}),y=new r({geometry:d,symbol:{type:"simple-fill",color:[227,139,79,.15],outline:{color:[0,0,0],width:1}}}),f=new r({geometry:d,symbol:{type:"text",color:"white",haloColor:"black",haloSize:"1px",text:"10 mins",xoffset:0,yoffset:0,font:{size:12,family:"sans-serif",weight:"bold"}}}),v=new i({container:"mapViewDiv",map:u,center:[-122.17284,37.4298937],zoom:13});v.graphics.add(g),v.graphics.add(y),v.graphics.add(f),v.on("click",function(e){console.log("click event: ",e.mapPoint)}),e.setState({view:v})})}},{key:"componentDidUpdate",value:function(e){var t=this;(this.state.view&&this.state.Polyline&&this.state.SimpleLineSymbol&&this.state.Graphic&&!e.emergencies&&this.props.emergencies&&this.props.emergencies.length>0||e.emergencies.length<this.props.emergencies.length)&&this.props.emergencies.forEach(function(e){var a=new t.state.Polyline({paths:[[e.location.lng,e.location.lat],[t.props.originPoint.longitude,t.props.originPoint.latitude]]}),n=new t.state.SimpleLineSymbol({color:[226,119,40],width:4}),i=new t.state.Graphic({geometry:a,symbol:n});t.state.view.graphics.add(i);var r=new t.state.Point({longitude:e.location.lng,latitude:e.location.lat}),o=new t.state.SimpleMarkerSymbol({color:[206,17,38],outline:{color:[255,255,255],width:2}}),l=new t.state.Graphic({geometry:r,symbol:o});t.state.view.goTo(i),t.state.view.graphics.add(l)})}}]),t}(n.Component),d=a(45),y=a(14),f=a(342),v=a(343),w=a(54),b=a(32),E=a.n(b),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={currentTime:E()().format("hh:mm:ss")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){e.setState({currentTime:E()().format("HH:mm:ss")})},1e3)}},{key:"render",value:function(){return i.a.createElement(f.a,null,i.a.createElement(v.a,{title:"Current Time",value:this.state.currentTime,valueStyle:{color:"grey"}}))}}]),t}(i.a.Component),j=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return console.log("rerendering"),i.a.createElement("div",{style:{background:"#ECECEC",padding:"20px"}},i.a.createElement(d.a,{gutter:13},i.a.createElement(y.a,{span:8},i.a.createElement(f.a,null,!0===this.props.safe?i.a.createElement(v.a,{title:"Status",value:"Safe",precision:2,valueStyle:{color:"#3f8600"},prefix:i.a.createElement(w.a,{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"})}):i.a.createElement(v.a,{title:"Status",value:"Emergency!",precision:2,valueStyle:{color:"#a33030"},prefix:i.a.createElement(w.a,{className:"el-item animated infinite flash",type:"warning",theme:"twoTone",twoToneColor:"#eb2f96",style:{fontSize:"20px"}})}))),i.a.createElement(y.a,{span:8},i.a.createElement(f.a,null,i.a.createElement(v.a,{title:"EMS Fleet on standby",value:5,valueStyle:{color:"grey"},prefix:i.a.createElement(w.a,{type:"car"})}))),i.a.createElement(y.a,{span:8},i.a.createElement(S,null))))}}]),t}(i.a.Component),k=a(120),O=a.n(k),x=a(62),M=a.n(x);var P=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).parseDate=function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()+":"+(t.getSeconds()>=10?"":"0")+t.getSeconds()},a.renderItem=function(e){return i.a.createElement(O.a.Item,null,i.a.createElement(M.a,{className:"el-item animated infinite flash",type:"warning",theme:"twoTone",twoToneColor:"#eb2f96",style:{fontSize:"20px"}}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("h3",{className:"el-item-text"},e.injury),i.a.createElement("h3",{className:"el-item-text"},function(e,t,a,n){if(e==a&&t==n)return 0;var i=Math.PI*e/180,r=Math.PI*a/180,o=t-n,l=Math.PI*o/180,c=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos(l);return c>1&&(c=1),c=60*(c=180*(c=Math.acos(c))/Math.PI)*1.1515}(e.location.lat,e.location.lng,a.props.originPoint.latitude,a.props.originPoint.longitude).toPrecision(2)," miles"),i.a.createElement("h3",{className:"el-item-text"},e.name," "),i.a.createElement("h3",{className:"el-item-text"},a.parseDate(e.timestamp)," ")))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(O.a,{style:{margin:"5px",width:"50%"},bordered:!0,header:i.a.createElement("h1",{style:{fontWeight:"340"}},"Emergencies"),dataSource:this.props.emergencies,renderItem:this.renderItem})}}]),t}(i.a.Component),C=a(121),D={longitude:-122.174626,latitude:37.434035};C.initializeApp({apiKey:"AIzaSyAXJg0mvp2ZkommGE63YVxDcKk_7TqkFok",authDomain:"treehacks-2c696.firebaseapp.com",databaseURL:"https://treehacks-2c696.firebaseio.com/"});var I=C.database().ref("accident"),T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={emergencies:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;I.on("value",function(t){if(null==t.val())e.setState({emergencies:[]});else{var a=t.val().spong123,n={location:{lat:a.location.lat,lng:a.location.lng},name:a.name,injury:a.injury,timestamp:Date.now()};e.setState({emergencies:[n]})}})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("img",{style:{display:"block",margin:"10px"},height:"62",width:"200",src:"stanford-med.png"}),i.a.createElement(j,{safe:!this.state.emergencies||0===this.state.emergencies.length}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"}},i.a.createElement(g,{style:{width:"70%"},originPoint:D,emergencies:this.state.emergencies}),i.a.createElement(P,{style:{width:"30%"},originPoint:D,emergencies:this.state.emergencies})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[179,1,2]]]);
//# sourceMappingURL=main.2e9b097a.chunk.js.map